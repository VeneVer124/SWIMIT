# OpenVPN â€“ Minimalny Konfig CLI (Debian)

Szybka i **minimalna konfiguracja serwera i klienta OpenVPN** na systemie Debian/Linux â€“ z uÅ¼yciem `easy-rsa` i bez zbÄ™dnych dodatkÃ³w. CaÅ‚oÅ›Ä‡ do zrobienia w ok. **10â€“15 minut**.

## âœ… ZaÅ‚oÅ¼enia

- Serwer i klient to dwa rÃ³Å¼ne systemy Debian/Ubuntu
- UÅ¼ytkownik ma dostÄ™p root (`sudo`)
- Adres IP serwera: `192.168.0.107` (przykÅ‚ad)

---

## ğŸ–¥ï¸ 1. Instalacja pakietÃ³w (na serwerze)

```bash
sudo apt update
sudo apt install openvpn easy-rsa -y
```

---

## ğŸ” 2. Tworzenie CA i kluczy (serwer)

```bash
mkdir ~/openvpn-ca && cd ~/openvpn-ca
ln -s /usr/share/easy-rsa/* .
./easyrsa init-pki
./easyrsa build-ca
./easyrsa gen-req server nopass
./easyrsa sign-req server server
./easyrsa gen-dh
openvpn --genkey --secret ta.key
```

---

## ğŸ“ 3. Kopiowanie plikÃ³w do /etc/openvpn

```bash
cp pki/ca.crt pki/private/server.key pki/issued/server.crt pki/dh.pem ta.key /etc/openvpn/
```

---

## âš™ï¸ 4. Tworzenie pliku konfiguracyjnego serwera

Zapisz jako `/etc/openvpn/server.conf`:

```ini
port 1194
proto udp
dev tun
ca ca.crt
cert server.crt
key server.key
dh dh.pem
auth SHA256
tls-auth ta.key 0
server 10.8.0.0 255.255.255.0
persist-key
persist-tun
keepalive 10 120
status openvpn-status.log
verb 3
```

---

## ğŸš€ 5. Uruchomienie serwera

```bash
sudo systemctl start openvpn@server
sudo systemctl enable openvpn@server
sudo systemctl status openvpn@server
```

---

## ğŸ‘¤ 6. Tworzenie klienta

```bash
./easyrsa gen-req client1 nopass
./easyrsa sign-req client client1
```

Kopiuj pliki:

```bash
cp pki/issued/client1.crt pki/private/client1.key /etc/openvpn/
```

---

## ğŸ“¦ 7. Tworzenie pliku `client1.ovpn`

Zapisz w `/root/client1.ovpn`:

```ini
client
dev tun
proto udp
remote 192.168.0.107 1194
resolv-retry infinite
nobind
persist-key
persist-tun
remote-cert-tls server
auth SHA256
tls-auth ta.key 1
verb 3

<ca>
(PASTE zawartoÅ›Ä‡ ca.crt)
</ca>

<cert>
(PASTE zawartoÅ›Ä‡ client1.crt)
</cert>

<key>
(PASTE zawartoÅ›Ä‡ client1.key)
</key>

<tls-auth>
(PASTE zawartoÅ›Ä‡ ta.key)
</tls-auth>
```

---

## ğŸ”„ 8. Przeniesienie pliku `client1.ovpn` na klienta

Na serwerze uruchom SSH:

```bash
sudo apt install openssh-server -y
sudo systemctl enable ssh
sudo systemctl start ssh
```

Na kliencie skopiuj plik:

```bash
scp root@192.168.0.107:/root/client1.ovpn ~/
```

---

## ğŸ§ª 9. PoÅ‚Ä…czenie z klienta

Na kliencie:

```bash
sudo apt install openvpn -y
sudo openvpn --config ~/client1.ovpn
```

Po poÅ‚Ä…czeniu moÅ¼esz sprawdziÄ‡ interfejs tun:

```bash
ip a
```

---

## ğŸ‰ Gotowe!

Masz dziaÅ‚ajÄ…cy tunel VPN miÄ™dzy serwerem a klientem.

---

## ğŸ“Œ Uwagi

- MoÅ¼na dodaÄ‡ reguÅ‚y NAT i routingu jeÅ›li potrzebujesz peÅ‚nego dostÄ™pu do sieci
- MoÅ¼na skorzystaÄ‡ z `ufw` lub `iptables` w razie potrzeby
- Dla bezpieczeÅ„stwa uÅ¼yj haseÅ‚ (passphrase) lub `tls-crypt` zamiast `tls-auth`

